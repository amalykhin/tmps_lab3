# Лабораторная работа №3

В данной лабораторной работе было имплементировано 4 поведенческих (behavioral patterns) и 1 структурный паттерн (structural patterns):
1. Фасад (facade)
2. Команда (command)
3. Состояние (state)
4. Итератор (iterator)
5. Наблюдатель (observer)
Данный набор шаблонов был выбран из паттернов, не использованых в предыдущих лабораторный работах.

## Команда
Данный паттерн реализован в данной работе в лице классов, имплементирующих абстрактный класс `Instruction`, а именно `Add`, `Subtract`, `Multiply` и `Divide`. Также существует комманда `SwitchToProtected`, которая не выполняет никаких операций, но является привилегированной операцией и служит для переключение режима работы процессора о котором речь пойдёт далее. Данные классы символизируют основные арифметические операции, исполняемые объектом класса `Cpu`. При вызове метода `execute()`, комманды исполняют определённую арифметическую операцию над операндами, полученными ими при создании экземпляров данных комманд.

## Состояние
Роль паттерна состояние исполняет класс `OperationMode` и его объекты. Данные объекты призваны символизировать режимы работы центрального процессора, а именно *реальный* и *защищённый* режимы процессоров семейства x86. В нашем случае, в реальном режиме процессор может выполнять любые комманды, в том числе комманду `SwitchToProtected`. В отличие от реального режима, при работе в защищённом режиме процессор не может исполнить эту операцию. При выполнении данной операции, сотояние процессора переключается из реалньного режима в защищённый, что ожидаемо для класса, реализующего паттерн "Состояние".

## Итератор
Итератор `RamIterator` позволяет проходить по инструкциям в нашей "оперативной памяти", символизируемой классом `Ram`. Как и все итераторы, объекты класса `RamIterator` предоставляют два метода: `hasNext()`, позволяющий проверить остались ли ещё иструкции для исполнения, и `next()` возвращающий следующую инструцию, хранящуюся в экземпляре класса `Ram`. Если метод `next()` был вызван в отсутствие каких-либо инструкций, исключение будет сгенерировано.

## Наблюдатель
Объекты, следящие за изменением наблюдаемого поля `register`, становятся "наблюдателями", реализуя интерфейс `CpuListener`, и получают уведомление при изменении значения поля `register` экземпляра класса `Cpu`. При исполнении какой-либо операции, меняющией значение регистра процессора, все объекты, "слушающие" изменения данного регистра, хранящиеся в списке `stateListeners`, получают уведомление. При выполнении любой операции, вызывается метод `update()` каждого подписавшегося слушателя.

## Фасад
Фасад, в данной работе представленный классом `Calculator`, позволяет с лёгкостью выполнить основные арифметические операции над любым количеством операндом. Напомним, что базовые инструкции процессора бинарны, то исполняются над 2 операндами.

## Вывод программы 

```
5
25
Can't execute privileged instructions in protected mode!
-98
0
4
1
3
6
10
10
```
